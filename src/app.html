<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PM Wisdom Engine</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root{--bg:#09090b;--card:#18181b;--elevated:#27272a;--text:#fafafa;--text2:#a1a1aa;--muted:#71717a;--border:#27272a;--blue:#3b82f6;--purple:#8b5cf6;--green:#22c55e;--orange:#f97316;--pink:#ec4899;--cyan:#06b6d4;--r:12px;--rs:6px}
    *{margin:0;padding:0;box-sizing:border-box}body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);line-height:1.5}.app{display:flex;min-height:100vh}
    .side{width:240px;background:var(--card);border-right:1px solid var(--border);padding:1.25rem;position:fixed;height:100vh;overflow-y:auto}
    .logo{font-size:1.25rem;font-weight:700;background:linear-gradient(135deg,var(--blue),var(--purple));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .logo-sub{font-size:.65rem;color:var(--muted);margin-bottom:1.5rem}.nav-label{font-size:.6rem;text-transform:uppercase;letter-spacing:.1em;color:var(--muted);margin:1rem 0 .5rem .5rem}
    .nav-btn{display:flex;align-items:center;gap:.6rem;width:100%;padding:.6rem .75rem;background:none;border:none;border-radius:var(--rs);color:var(--text2);font-size:.85rem;cursor:pointer;text-align:left}
    .nav-btn:hover{background:var(--elevated);color:var(--text)}.nav-btn.on{background:linear-gradient(135deg,var(--blue),var(--purple));color:#fff}
    .nav-btn.featured{border:1px solid var(--orange)}.nav-btn.featured.on{background:linear-gradient(135deg,var(--orange),var(--pink));border:none}
    .badge{margin-left:auto;background:var(--elevated);padding:.1rem .4rem;border-radius:99px;font-size:.6rem}.nav-btn.on .badge{background:rgba(255,255,255,.2)}.new-badge{background:var(--orange);color:#000;font-weight:600}
    .stage-selector{margin-top:1.5rem;padding-top:1rem;border-top:1px solid var(--border)}.stage-label{font-size:.6rem;text-transform:uppercase;letter-spacing:.1em;color:var(--muted);margin-bottom:.5rem}
    .stage-options{display:flex;flex-direction:column;gap:.25rem}.stage-opt{display:flex;align-items:center;gap:.5rem;padding:.5rem .6rem;border-radius:var(--rs);cursor:pointer;font-size:.8rem;color:var(--text2)}
    .stage-opt:hover{background:var(--elevated)}.stage-opt.on{background:var(--elevated);color:var(--text)}.stage-opt.on::before{content:'‚úì';color:var(--green);font-size:.7rem}
    .main{flex:1;margin-left:240px;padding:1.5rem 2rem;max-width:1000px}.sec{display:none}.sec.on{display:block}
    .hdr{margin-bottom:1.25rem}.hdr h1{font-size:1.5rem;font-weight:700;margin-bottom:.25rem}.hdr p{color:var(--text2);font-size:.85rem}
    .sbox{position:relative;margin-bottom:1rem}.sbox input{width:100%;padding:.75rem 1rem .75rem 2.5rem;background:var(--card);border:1px solid var(--border);border-radius:var(--r);color:var(--text);font-size:.9rem}
    .sbox input:focus{outline:none;border-color:var(--blue)}.sbox input::placeholder{color:var(--muted)}.sbox svg{position:absolute;left:.75rem;top:50%;transform:translateY(-50%);color:var(--muted)}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1rem}.grid.single{grid-template-columns:1fr;max-width:700px}
    .card{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:1rem;cursor:pointer;transition:.15s}.card:hover{border-color:var(--blue);transform:translateY(-2px)}
    .card-t{font-weight:600;margin-bottom:.2rem}.card-s{color:var(--text2);font-size:.8rem;margin-bottom:.5rem;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
    .card-m{display:flex;gap:.75rem;font-size:.7rem;color:var(--muted);margin-bottom:.5rem}.tags{display:flex;flex-wrap:wrap;gap:.3rem}.tag{padding:.15rem .4rem;background:var(--elevated);border-radius:99px;font-size:.65rem;color:var(--text2)}
    .yt-btn{display:inline-flex;align-items:center;gap:.3rem;margin-top:.6rem;padding:.4rem .7rem;background:var(--blue);color:#fff;border-radius:var(--rs);font-size:.75rem;font-weight:500;text-decoration:none}.yt-btn:hover{background:#2563eb}
    .fw-card{padding:0;overflow:hidden}.fw-top{padding:.875rem 1rem;background:linear-gradient(135deg,rgba(139,92,246,.15),rgba(59,130,246,.1));border-bottom:1px solid var(--border)}.fw-name{font-weight:700}.fw-by{color:var(--purple);font-size:.75rem}
    .fw-body{padding:1rem}.fw-desc{color:var(--text2);font-size:.8rem;margin-bottom:.75rem;line-height:1.5}.fw-stats{display:flex;gap:1.5rem;padding-top:.6rem;border-top:1px solid var(--border)}.fw-stat-v{font-weight:700;color:var(--purple)}.fw-stat-l{font-size:.6rem;color:var(--muted);text-transform:uppercase}
    .ct-card{padding:0;cursor:default}.ct-card:hover{transform:none}.ct-top{padding:.75rem 1rem;background:linear-gradient(135deg,var(--orange),var(--pink));font-weight:600;display:flex;align-items:center;gap:.5rem}.ct-body{padding:1rem}.ct-q{font-weight:600;margin-bottom:.875rem}
    .positions{display:grid;grid-template-columns:1fr 1fr;gap:.75rem}.pos{padding:.875rem;border-radius:var(--rs)}.pos.a{background:rgba(59,130,246,.1);border:1px solid rgba(59,130,246,.25)}.pos.b{background:rgba(236,72,153,.1);border:1px solid rgba(236,72,153,.25)}
    .pos-lbl{font-size:.6rem;text-transform:uppercase;letter-spacing:.05em;font-weight:600;margin-bottom:.25rem}.pos.a .pos-lbl{color:var(--blue)}.pos.b .pos-lbl{color:var(--pink)}.pos-title{font-weight:600;font-size:.85rem;margin-bottom:.25rem}.pos-quote{font-size:.75rem;color:var(--text2);font-style:italic;line-height:1.4}.pos-meta{margin-top:.4rem;font-size:.65rem;color:var(--muted)}
    .ct-insight{margin-top:.875rem;padding:.75rem;background:var(--elevated);border-radius:var(--rs);border-left:3px solid var(--green)}.ct-insight-lbl{font-size:.6rem;text-transform:uppercase;color:var(--green);font-weight:600;margin-bottom:.2rem}.ct-insight-txt{font-size:.8rem;color:var(--text2)}
    .exp-btn{display:inline-flex;align-items:center;gap:.3rem;margin-top:.75rem;padding:.4rem .6rem;background:none;border:1px solid var(--border);color:var(--text2);border-radius:var(--rs);font-size:.75rem;cursor:pointer}.exp-btn:hover{background:var(--elevated);color:var(--text)}
    .in-card{border-left:3px solid var(--green);cursor:default}.in-card:hover{transform:none}.in-q{font-size:.95rem;line-height:1.5;margin-bottom:.5rem}.in-q::before{content:'"';font-size:1.25rem;color:var(--green);vertical-align:-.15em;margin-right:.1rem}.in-src{font-weight:500;color:var(--text2);font-size:.8rem}
    .stats{display:grid;grid-template-columns:repeat(4,1fr);gap:.6rem;margin-bottom:1.25rem}.stat{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:.875rem;text-align:center}.stat-v{font-size:1.5rem;font-weight:700;background:linear-gradient(135deg,var(--blue),var(--purple));-webkit-background-clip:text;-webkit-text-fill-color:transparent}.stat-l{font-size:.7rem;color:var(--muted)}
    .acts{display:grid;grid-template-columns:repeat(2,1fr);gap:.6rem;margin-bottom:1.25rem}.act{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:1rem;cursor:pointer;transition:.15s}.act:hover{border-color:var(--blue);transform:translateY(-2px)}.act.featured{border-color:var(--orange);background:linear-gradient(135deg,rgba(249,115,22,.05),rgba(236,72,153,.05))}.act-i{font-size:1.25rem;margin-bottom:.4rem}.act-t{font-weight:600;font-size:.9rem}.act-d{font-size:.75rem;color:var(--text2)}.act-new{display:inline-block;background:var(--orange);color:#000;font-size:.6rem;font-weight:700;padding:.1rem .3rem;border-radius:3px;margin-left:.3rem}
    .wbox{background:linear-gradient(135deg,var(--card),var(--elevated));border:1px solid var(--border);border-radius:var(--r);padding:1rem}.wbox-hdr{display:flex;justify-content:space-between;align-items:center;margin-bottom:.6rem}.wbox-t{font-weight:600;font-size:.9rem}.ref-btn{background:var(--elevated);border:1px solid var(--border);color:var(--text2);padding:.3rem .5rem;border-radius:var(--rs);cursor:pointer;font-size:.7rem}.ref-btn:hover{background:var(--blue);color:#fff}.wbox-txt{font-size:.95rem;margin-bottom:.6rem;line-height:1.5}.wbox-ftr{display:flex;justify-content:space-between;align-items:center}
    .sim-container{max-width:700px}.sim-input-section{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:1.25rem;margin-bottom:1.5rem}.sim-label{font-weight:600;margin-bottom:.5rem}.sim-sublabel{font-size:.8rem;color:var(--text2);margin-bottom:.75rem}.sim-textarea{width:100%;min-height:100px;padding:.875rem;background:var(--elevated);border:1px solid var(--border);border-radius:var(--rs);color:var(--text);font-family:inherit;font-size:.9rem;resize:vertical}.sim-textarea:focus{outline:none;border-color:var(--blue)}.sim-textarea::placeholder{color:var(--muted)}
    .sim-context{display:grid;grid-template-columns:1fr 1fr;gap:.75rem;margin:1rem 0}.sim-select{padding:.6rem .75rem;background:var(--elevated);border:1px solid var(--border);border-radius:var(--rs);color:var(--text);font-size:.85rem}.sim-select:focus{outline:none;border-color:var(--blue)}.sim-btn{width:100%;padding:.875rem;background:linear-gradient(135deg,var(--orange),var(--pink));border:none;border-radius:var(--rs);color:#fff;font-weight:600;font-size:.95rem;cursor:pointer}.sim-btn:hover{transform:scale(1.02)}
    .example-queries{margin-top:1rem}.example-label{font-size:.75rem;color:var(--muted);margin-bottom:.5rem}.example-chips{display:flex;flex-wrap:wrap;gap:.4rem}.example-chip{padding:.4rem .75rem;background:var(--elevated);border:1px solid var(--border);border-radius:99px;font-size:.75rem;color:var(--text2);cursor:pointer}.example-chip:hover{border-color:var(--orange);color:var(--text)}
    .sim-results{margin-top:1.5rem}.sim-results-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem}.sim-results-title{font-weight:600}.sim-results-count{font-size:.8rem;color:var(--muted)}
    .advice-card{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:1rem;margin-bottom:.75rem;cursor:pointer}.advice-card:hover{border-color:var(--orange)}.advice-header{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:.5rem}.advice-guest{font-weight:600}.advice-relevance{font-size:.7rem;padding:.2rem .5rem;border-radius:99px}.advice-relevance.high{background:rgba(34,197,94,.15);color:var(--green)}.advice-relevance.med{background:rgba(234,179,8,.15);color:#eab308}.advice-context{font-size:.75rem;color:var(--text2);margin-bottom:.5rem}.advice-quote{font-size:.85rem;line-height:1.5;padding:.75rem;background:var(--elevated);border-radius:var(--rs);border-left:3px solid var(--orange);margin-bottom:.5rem}.advice-why{font-size:.75rem;color:var(--muted);margin-bottom:.5rem}
    .active-stage-bar{background:rgba(6,182,212,.1);border:1px solid rgba(6,182,212,.25);border-radius:var(--rs);padding:.5rem .75rem;margin-bottom:1rem;display:flex;align-items:center;justify-content:space-between;font-size:.8rem}.active-stage-bar.hidden{display:none}.active-stage-text{color:var(--cyan)}.clear-stage{background:none;border:none;color:var(--text2);cursor:pointer;font-size:.75rem}
    .modal-bg{position:fixed;inset:0;background:rgba(0,0,0,.85);display:none;align-items:center;justify-content:center;z-index:1000;padding:1.5rem}.modal-bg.show{display:flex}.modal{background:var(--card);border:1px solid var(--border);border-radius:var(--r);max-width:600px;width:100%;max-height:80vh;overflow-y:auto}.modal-hdr{padding:1rem;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;background:var(--card)}.modal-title{font-weight:700}.modal-x{background:none;border:none;color:var(--muted);font-size:1.25rem;cursor:pointer}.info{color:var(--muted);font-size:.8rem;margin-bottom:.75rem}.empty{text-align:center;padding:2.5rem 1rem;color:var(--muted)}.empty-i{font-size:2.5rem;margin-bottom:.5rem;opacity:.3}.empty-t{font-size:1rem;color:var(--text2);margin-bottom:.25rem}
    .loading{display:flex;align-items:center;justify-content:center;gap:.5rem;padding:2rem;color:var(--text2)}.spinner{width:20px;height:20px;border:2px solid var(--border);border-top-color:var(--orange);border-radius:50%;animation:spin .8s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}
    @media(max-width:800px){.side{display:none}.main{margin-left:0;padding:1rem}.stats,.acts,.positions,.sim-context{grid-template-columns:1fr 1fr}}@media(max-width:500px){.stats{grid-template-columns:1fr 1fr}.acts,.sim-context{grid-template-columns:1fr}.positions{grid-template-columns:1fr}.grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
<div class="app">
  <aside class="side">
    <div class="logo">PM Wisdom</div>
    <div class="logo-sub">300+ Lenny's Podcast episodes</div>
    <nav>
      <div class="nav-label">Explore</div>
      <button class="nav-btn on" data-s="home">üè† Home</button>
      <button class="nav-btn featured" data-s="simulator">üéØ Decision Simulator <span class="badge new-badge">NEW</span></button>
      <button class="nav-btn" data-s="search">üîç Search</button>
      <button class="nav-btn" data-s="episodes">üìö Episodes <span class="badge" id="n-ep">303</span></button>
      <div class="nav-label">Learn</div>
      <button class="nav-btn" data-s="frameworks">üß† Frameworks <span class="badge" id="n-fw">14</span></button>
      <button class="nav-btn" data-s="contradictions">‚ö° Debates <span class="badge" id="n-ct">8</span></button>
      <button class="nav-btn" data-s="insights">üí° Insights</button>
    </nav>
    <div class="stage-selector">
      <div class="stage-label">üéØ Filter by Career Stage</div>
      <div class="stage-options">
        <div class="stage-opt on" data-stage="all"><span>üåê</span> All Levels</div>
        <div class="stage-opt" data-stage="early"><span>üå±</span> Early PM (0-2 yrs)</div>
        <div class="stage-opt" data-stage="mid"><span>üåø</span> Mid PM (2-5 yrs)</div>
        <div class="stage-opt" data-stage="senior"><span>üå≥</span> Senior PM (5+ yrs)</div>
        <div class="stage-opt" data-stage="leader"><span>üëî</span> PM Leader</div>
        <div class="stage-opt" data-stage="founder"><span>üöÄ</span> Founder</div>
      </div>
    </div>
  </aside>
  <main class="main">
    <section id="home" class="sec on">
      <div class="hdr"><h1>Welcome to PM Wisdom</h1><p>Learn from 300+ hours of world-class product leaders</p></div>
      <div class="active-stage-bar hidden" id="stage-bar"><span class="active-stage-text"><span id="stage-icon">üå±</span> Filtered for: <strong id="stage-name">Early PMs</strong></span><button class="clear-stage" onclick="setStage('all')">‚úï Clear</button></div>
      <div class="stats"><div class="stat"><div class="stat-v" id="s-ep">303</div><div class="stat-l">Episodes</div></div><div class="stat"><div class="stat-v" id="s-seg">5K+</div><div class="stat-l">Moments</div></div><div class="stat"><div class="stat-v" id="s-fw">14</div><div class="stat-l">Frameworks</div></div><div class="stat"><div class="stat-v">300+</div><div class="stat-l">Hours</div></div></div>
      <div class="acts">
        <div class="act featured" onclick="go('simulator')"><div class="act-i">üéØ</div><div class="act-t">Decision Simulator <span class="act-new">NEW</span></div><div class="act-d">Describe your situation, get tailored advice</div></div>
        <div class="act" onclick="go('frameworks')"><div class="act-i">üß†</div><div class="act-t">Learn a Framework</div><div class="act-d">LNO, 11-Star, JTBD & more</div></div>
        <div class="act" onclick="go('contradictions')"><div class="act-i">‚ö°</div><div class="act-t">Explore Debates</div><div class="act-d">Where experts disagree</div></div>
        <div class="act" onclick="go('search')"><div class="act-i">üîç</div><div class="act-t">Search Topics</div><div class="act-d">Find advice on any topic</div></div>
      </div>
      <div class="wbox"><div class="wbox-hdr"><div class="wbox-t">üí° Random Wisdom</div><button class="ref-btn" onclick="newW()">‚Üª New</button></div><div class="wbox-txt" id="w-txt">"Loading..."</div><div class="wbox-ftr"><span class="in-src" id="w-src">‚Äî</span><a href="#" class="yt-btn" id="w-link" target="_blank">‚ñ∂ Watch</a></div></div>
    </section>
    <section id="simulator" class="sec">
      <div class="hdr"><h1>üéØ Decision Simulator</h1><p>Describe your situation and get relevant advice from guests who faced similar challenges</p></div>
      <div class="sim-container">
        <div class="sim-input-section">
          <div class="sim-label">üí≠ What's your situation?</div>
          <div class="sim-sublabel">Describe the decision or challenge you're facing</div>
          <textarea class="sim-textarea" id="sim-input" placeholder="Example: I'm a PM at a Series B startup. We have decent traction but growth is slowing. Should we expand to new markets or double down on our core?"></textarea>
          <div class="sim-context">
            <select class="sim-select" id="sim-stage"><option value="">Your career stage...</option><option value="early">üå± Early PM (0-2 years)</option><option value="mid">üåø Mid PM (2-5 years)</option><option value="senior">üå≥ Senior PM (5+ years)</option><option value="leader">üëî PM Leader / Director+</option><option value="founder">üöÄ Founder</option></select>
            <select class="sim-select" id="sim-company"><option value="">Company stage...</option><option value="pre-seed">Pre-seed / Idea stage</option><option value="seed">Seed / Pre-PMF</option><option value="series-a">Series A / Early growth</option><option value="series-b">Series B+ / Scaling</option><option value="growth">Growth stage</option><option value="enterprise">Enterprise / Large co</option></select>
          </div>
          <button class="sim-btn" onclick="runSim()">üîÆ Find Relevant Wisdom</button>
          <div class="example-queries"><div class="example-label">Try these examples:</div><div class="example-chips"><span class="example-chip" onclick="setEx('pricing')">How should I price my product?</span><span class="example-chip" onclick="setEx('pmf')">How do I know if we have PMF?</span><span class="example-chip" onclick="setEx('hiring')">Should I hire specialists or generalists?</span><span class="example-chip" onclick="setEx('growth')">Our growth is slowing down</span></div></div>
        </div>
        <div class="sim-results" id="sim-results" style="display:none"><div class="sim-results-header"><div class="sim-results-title">üéØ Relevant Advice</div><div class="sim-results-count" id="sim-count"></div></div><div id="sim-list"></div></div>
      </div>
    </section>
    <section id="search" class="sec"><div class="hdr"><h1>Search PM Wisdom</h1><p>Find advice from 300+ episodes</p></div><div class="sbox"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg><input id="q" placeholder="Try: product-market fit, hiring, pricing, growth..."></div><div class="info" id="q-info"></div><div class="grid single" id="q-res"><div class="empty"><div class="empty-i">üîç</div><div class="empty-t">Search any topic</div></div></div></section>
    <section id="episodes" class="sec"><div class="hdr"><h1>All Episodes</h1><p>Browse the complete archive</p></div><div class="sbox"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg><input id="ep-q" placeholder="Filter by guest or title..."></div><div class="info" id="ep-info"></div><div class="grid" id="ep-list"></div></section>
    <section id="frameworks" class="sec"><div class="hdr"><h1>Product Frameworks</h1><p>Click any framework to explore</p></div><div class="grid" id="fw-list"></div></section>
    <section id="contradictions" class="sec"><div class="hdr"><h1>Where Experts Disagree</h1><p>Context matters more than universal rules</p></div><div class="grid single" id="ct-list"></div></section>
    <section id="insights" class="sec"><div class="hdr"><h1>Key Insights</h1><p>Memorable quotes from guests</p></div><div class="grid" id="in-list"></div></section>
  </main>
</div>
<div class="modal-bg" id="modal"><div class="modal"><div class="modal-hdr"><h2 class="modal-title" id="m-t"></h2><button class="modal-x" onclick="xModal()">√ó</button></div><div class="modal-body" id="m-b"></div></div></div>
<!-- DATA_INJECTION_POINT -->
<script>
const D=window.PM_WISDOM_DATA||{episodes:[],segments:[],frameworks:[],contradictions:[],insights:[]};
let curStage='all';
const STAGE_CFG={all:{name:'All',icon:'üåê'},early:{name:'Early PM',icon:'üå±',kw:['beginner','first pm','new pm','learning','basics']},mid:{name:'Mid PM',icon:'üåø',kw:['senior','lead','growth','influence','stakeholder']},senior:{name:'Senior PM',icon:'üå≥',kw:['principal','staff','vision','org','executive']},leader:{name:'PM Leader',icon:'üëî',kw:['director','vp','head of','managing','hiring','team building']},founder:{name:'Founder',icon:'üöÄ',kw:['founder','ceo','startup','fundraising','investor','pivot']}};
const TOPICS={pricing:['price','pricing','monetiz','revenue','charge','freemium'],pmf:['product-market fit','pmf','market fit','validation','traction','retention'],hiring:['hire','hiring','recruit','team','candidate','interview'],growth:['growth','scale','scaling','expand','acquisition','viral'],stakeholders:['stakeholder','executive','leadership','alignment','buy-in'],prioritization:['priorit','roadmap','backlog','trade-off','scope'],discovery:['discovery','research','user','interview','insight'],metrics:['metric','kpi','measure','data','analytics','north star']};
const EXAMPLES={pricing:"How should I approach pricing for my SaaS product?",pmf:"How do I know if we have product-market fit?",hiring:"Should I hire specialists or generalists for my team?",growth:"Our growth has slowed significantly. How do I diagnose this?"};

function go(s){document.querySelectorAll('.nav-btn').forEach(n=>n.classList.toggle('on',n.dataset.s===s));document.querySelectorAll('.sec').forEach(x=>x.classList.toggle('on',x.id===s));if(s==='search')setTimeout(()=>document.getElementById('q').focus(),50);if(s==='simulator')setTimeout(()=>document.getElementById('sim-input').focus(),50);}
document.querySelectorAll('.nav-btn').forEach(n=>n.onclick=()=>go(n.dataset.s));

function setStage(s){curStage=s;document.querySelectorAll('.stage-opt').forEach(o=>o.classList.toggle('on',o.dataset.stage===s));const bar=document.getElementById('stage-bar');bar.classList.toggle('hidden',s==='all');if(s!=='all'){document.getElementById('stage-name').textContent=STAGE_CFG[s].name;document.getElementById('stage-icon').textContent=STAGE_CFG[s].icon;}renderEps();renderFw();renderIn();const q=document.getElementById('q').value;if(q)doQ(q);}
document.querySelectorAll('.stage-opt').forEach(o=>o.onclick=()=>setStage(o.dataset.stage));
function matchStage(txt,topics=[]){if(curStage==='all')return true;const cfg=STAGE_CFG[curStage];if(!cfg||!cfg.kw)return true;const s=(txt+' '+topics.join(' ')).toLowerCase();return cfg.kw.some(k=>s.includes(k));}

let st;document.getElementById('q').oninput=e=>{clearTimeout(st);st=setTimeout(()=>doQ(e.target.value),200);};
function doQ(q){const box=document.getElementById('q-res'),info=document.getElementById('q-info');if(!q||q.length<2){info.textContent='';box.innerHTML='<div class="empty"><div class="empty-i">üîç</div><div class="empty-t">Search any topic</div></div>';return;}const ql=q.toLowerCase();let res=(D.segments||[]).filter(s=>s.text&&s.text.toLowerCase().includes(ql));if(curStage!=='all')res=res.filter(s=>matchStage(s.text,s.topics||[]));res=res.slice(0,25);if(!res.length){info.textContent='';box.innerHTML='<div class="empty"><div class="empty-i">ü§∑</div><div class="empty-t">No results</div></div>';return;}info.textContent=res.length+' results';box.innerHTML=res.map(r=>'<div class="card" onclick="openEp(\''+r.episode_id+'\')"><div class="card-t">'+(r.guest||'Guest')+'</div><p class="card-s">'+hl(tr(r.text,200),q)+'</p><div class="card-m">'+(r.estimated_time?'<span>‚è± '+fmtT(r.estimated_time)+'</span>':'')+'</div><a href="https://youtube.com/watch?v='+r.video_id+(r.estimated_time?'&t='+r.estimated_time:'')+'" target="_blank" class="yt-btn" onclick="event.stopPropagation()">‚ñ∂ Watch</a></div>').join('');}

document.getElementById('ep-q').oninput=e=>renderEps(e.target.value);
function renderEps(f=''){let eps=D.episodes||[];if(f){const fl=f.toLowerCase();eps=eps.filter(e=>(e.guest||'').toLowerCase().includes(fl)||(e.title||'').toLowerCase().includes(fl));}if(curStage!=='all')eps=eps.filter(e=>matchStage((e.title||'')+' '+(e.transcript||''),e.topics||[]));document.getElementById('ep-info').textContent=eps.length+' episodes';document.getElementById('ep-list').innerHTML=eps.slice(0,50).map(e=>'<div class="card" onclick="openEp(\''+e.id+'\')"><div class="card-t">'+(e.guest||'Guest')+'</div><p class="card-s">'+(e.title||'')+'</p><div class="card-m"><span>‚è± '+(e.duration||'')+'</span><span>üëÅ '+fmtN(e.view_count)+'</span></div><div class="tags">'+(e.topics||[]).slice(0,3).map(t=>'<span class="tag">'+t+'</span>').join('')+'</div><a href="https://youtube.com/watch?v='+e.video_id+'" target="_blank" class="yt-btn" onclick="event.stopPropagation()">‚ñ∂ Watch</a></div>').join('');}

const FW_STAGES={'11-Star Experience':['early','mid'],'LNO Framework':['mid','senior'],'DHM Framework':['senior','leader'],'Continuous Discovery':['early','mid','senior'],'Jobs To Be Done':['early','mid','senior'],'Hook Model':['early','mid'],'North Star Metric':['mid','senior','leader'],'PMF Survey (40% Test)':['founder','early'],'Pre-mortem':['mid','senior','leader'],'Founder Mode':['founder','leader']};
function renderFw(){let fws=D.frameworks||[];if(curStage!=='all')fws=fws.filter(f=>{const stages=FW_STAGES[f.name]||['early','mid','senior','leader','founder'];return stages.includes(curStage);});document.getElementById('fw-list').innerHTML=fws.map(f=>{const stages=FW_STAGES[f.name]||[];const icons=stages.map(s=>(STAGE_CFG[s]||{}).icon||'').join('');return '<div class="card fw-card" onclick="openFw(\''+f.name+'\')"><div class="fw-top"><div class="fw-name">'+f.name+'</div><div class="fw-by">by '+(f.creator||'?')+' '+icons+'</div></div><div class="fw-body"><p class="fw-desc">'+(f.description||'')+'</p><div class="fw-stats"><div><div class="fw-stat-v">'+(f.total_mentions||0)+'</div><div class="fw-stat-l">Mentions</div></div><div><div class="fw-stat-v">'+(f.episodes||[]).length+'</div><div class="fw-stat-l">Episodes</div></div></div></div></div>';}).join('');}

const cI={'Delegation vs Staying in Details':'Early stage = stay close. At scale = delegate.','Move Fast vs Get It Right':'Reversible ‚Üí fast. Irreversible ‚Üí slow.','Data-Driven vs Intuition':'Data validates. Intuition explores.','Hire Specialists vs Generalists':'Generalists early, specialists at scale.','Stay Focused vs Expand':'Focus until real PMF, then expand.','Listen to Users vs Follow Your Vision':'Listen to problems, not solutions.','Build Consensus vs Be Decisive':'Consensus for big bets, decisive daily.','Process vs Creative Chaos':'Process enables creativity.'};
function renderCt(){document.getElementById('ct-list').innerHTML=(D.contradictions||[]).map(c=>'<div class="card ct-card"><div class="ct-top"><span>‚ö°</span> '+c.topic+'</div><div class="ct-body"><div class="ct-q">Should you '+c.topic.toLowerCase().replace(' vs ',' or ')+'?</div><div class="positions"><div class="pos a"><div class="pos-lbl">Side A</div><div class="pos-title">'+c.topic.split(' vs ')[0]+'</div><div class="pos-quote">"'+(c.position_a?.sample_quote||'Supporting this...')+'"</div><div class="pos-meta">'+(c.position_a?.guest_count||'?')+' guests ¬∑ '+(c.position_a?.quote_count||'?')+' quotes</div></div><div class="pos b"><div class="pos-lbl">Side B</div><div class="pos-title">'+c.topic.split(' vs ')[1]+'</div><div class="pos-quote">"'+(c.position_b?.sample_quote||'Supporting this...')+'"</div><div class="pos-meta">'+(c.position_b?.guest_count||'?')+' guests ¬∑ '+(c.position_b?.quote_count||'?')+' quotes</div></div></div><div class="ct-insight"><div class="ct-insight-lbl">üí° The Real Answer</div><div class="ct-insight-txt">'+(cI[c.topic]||'Context determines which works best.')+'</div></div><button class="exp-btn" onclick="searchT(\''+c.topic.split(' vs ')[0]+'\')">üîç Explore episodes</button></div></div>').join('');}

function renderIn(){let ins=D.insights||[];if(curStage!=='all')ins=ins.filter(i=>matchStage(i.text,[]));document.getElementById('in-list').innerHTML=ins.slice(0,20).map(i=>'<div class="card in-card"><p class="in-q">'+i.text+'</p><div class="in-src">‚Äî '+(i.guest||'Guest')+'</div></div>').join('');}

function setEx(k){document.getElementById('sim-input').value=EXAMPLES[k]||'';document.getElementById('sim-input').focus();}
function runSim(){const input=document.getElementById('sim-input').value.trim();if(!input)return;const stage=document.getElementById('sim-stage').value;const company=document.getElementById('sim-company').value;const resDiv=document.getElementById('sim-results');const listDiv=document.getElementById('sim-list');const countDiv=document.getElementById('sim-count');resDiv.style.display='block';listDiv.innerHTML='<div class="loading"><div class="spinner"></div> Analyzing...</div>';setTimeout(()=>{const advice=findAdvice(input,stage,company);countDiv.textContent=advice.length+' perspectives found';if(!advice.length){listDiv.innerHTML='<div class="empty"><div class="empty-i">ü§î</div><div class="empty-t">No specific advice found</div><p>Try rephrasing or use search</p></div>';return;}listDiv.innerHTML=advice.map(a=>'<div class="advice-card" onclick="openEp(\''+a.episode_id+'\')"><div class="advice-header"><div class="advice-guest">'+a.guest+'</div><span class="advice-relevance '+a.rel+'">'+(a.rel==='high'?'üéØ Highly Relevant':'üëç Relevant')+'</span></div><div class="advice-context">'+a.ctx+'</div><div class="advice-quote">'+tr(a.quote,250)+'</div><div class="advice-why">üí° '+a.why+'</div><a href="https://youtube.com/watch?v='+a.vid+(a.time?'&t='+a.time:'')+'" target="_blank" class="yt-btn" onclick="event.stopPropagation()">‚ñ∂ Watch</a></div>').join('');},400);}
function findAdvice(query,stage,company){const ql=query.toLowerCase();const matched=[];for(const[topic,kws]of Object.entries(TOPICS)){if(kws.some(k=>ql.includes(k)))matched.push(topic);}const words=ql.split(/\s+/).filter(w=>w.length>3);const scored=[];for(const seg of(D.segments||[])){if(!seg.text)continue;const tl=seg.text.toLowerCase();let score=0,mKw=[];for(const t of matched){for(const k of TOPICS[t]){if(tl.includes(k)){score+=3;mKw.push(k);}}}for(const w of words){if(tl.includes(w))score+=1;}if(stage){const skw=(STAGE_CFG[stage]||{}).kw||[];for(const k of skw)if(tl.includes(k))score+=2;}if(score>3)scored.push({seg,score,mKw});}scored.sort((a,b)=>b.score-a.score);const top=scored.slice(0,8);const results=[];for(const{seg,score,mKw}of top){const ep=(D.episodes||[]).find(e=>e.id===seg.episode_id);let rel=score>10?'high':'med';const ctx=ep?ep.guest+' discussed '+(ep.topics||[]).slice(0,2).join(' and '):'From a relevant episode';const whys=['Addresses '+mKw.slice(0,2).join(' and '),'Provides perspective on '+(matched[0]||'your situation'),'Relevant experience','Practical advice'];const why=whys[Math.floor(Math.random()*whys.length)];results.push({guest:seg.guest||ep?.guest||'Guest',episode_id:seg.episode_id,vid:seg.video_id||ep?.video_id,time:seg.estimated_time,quote:seg.text,ctx,why,rel});}return results;}

function openEp(id){const e=(D.episodes||[]).find(x=>x.id===id);if(!e)return;const segs=(D.segments||[]).filter(s=>s.episode_id===id).slice(0,6);document.getElementById('m-t').textContent=e.guest;document.getElementById('m-b').innerHTML='<div style="margin-bottom:1rem"><div style="font-size:1.1rem;font-weight:700">'+e.guest+'</div><div style="color:var(--text2);font-size:.9rem">'+e.title+'</div></div><div class="card-m" style="margin-bottom:.75rem"><span>‚è± '+e.duration+'</span><span>üëÅ '+fmtN(e.view_count)+'</span></div><div class="tags" style="margin-bottom:.75rem">'+(e.topics||[]).map(t=>'<span class="tag">'+t+'</span>').join('')+'</div><a href="https://youtube.com/watch?v='+e.video_id+'" target="_blank" class="yt-btn">‚ñ∂ Watch on YouTube</a>'+(segs.length?'<div style="margin-top:1.25rem"><div style="font-weight:600;margin-bottom:.6rem;font-size:.85rem;color:var(--text2)">Key Moments</div>'+segs.map(s=>'<a href="https://youtube.com/watch?v='+s.video_id+'&t='+s.estimated_time+'" target="_blank" style="display:block;padding:.6rem;background:var(--elevated);border-radius:var(--rs);margin-bottom:.4rem;text-decoration:none;color:inherit;font-size:.8rem"><div style="color:var(--text2);margin-bottom:.2rem">'+tr(s.text,100)+'</div><div style="color:var(--blue);font-size:.7rem">‚è± '+fmtT(s.estimated_time)+'</div></a>').join('')+'</div>':'');document.getElementById('modal').classList.add('show');}
function openFw(name){const f=(D.frameworks||[]).find(x=>x.name===name);if(!f)return;const stages=FW_STAGES[f.name]||[];const stageText=stages.map(s=>(STAGE_CFG[s]||{}).name||s).join(', ');document.getElementById('m-t').textContent=f.name;document.getElementById('m-b').innerHTML='<div style="color:var(--purple);font-size:.85rem;margin-bottom:.4rem">by '+(f.creator||'Unknown')+'</div><p style="font-size:.95rem;line-height:1.5;margin-bottom:1rem">'+(f.description||'')+'</p>'+(stageText?'<div style="font-size:.8rem;color:var(--cyan);margin-bottom:1rem">Best for: '+stageText+'</div>':'')+'<div style="display:flex;gap:1.5rem;padding:.75rem;background:var(--elevated);border-radius:var(--rs);margin-bottom:1rem"><div><div style="font-size:1.25rem;font-weight:700;color:var(--purple)">'+(f.total_mentions||0)+'</div><div style="font-size:.6rem;color:var(--muted);text-transform:uppercase">Mentions</div></div><div><div style="font-size:1.25rem;font-weight:700;color:var(--blue)">'+(f.episodes||[]).length+'</div><div style="font-size:.6rem;color:var(--muted);text-transform:uppercase">Episodes</div></div></div>'+((f.episodes||[]).length?'<div style="font-weight:600;font-size:.85rem;margin-bottom:.5rem">Episodes discussing this:</div>'+f.episodes.slice(0,4).map(e=>'<div style="padding:.6rem;background:var(--elevated);border-radius:var(--rs);margin-bottom:.4rem;cursor:pointer" onclick="xModal();openEp(\''+e.episode_id+'\')"><div style="font-weight:600;font-size:.85rem">'+e.guest+'</div>'+(e.contexts&&e.contexts[0]?'<div style="font-size:.75rem;color:var(--text2);margin-top:.2rem">"'+tr(e.contexts[0],80)+'"</div>':'')+'</div>').join(''):'')+'<button class="exp-btn" style="margin-top:.75rem" onclick="xModal();searchT(\''+f.name+'\')">üîç Search "'+f.name+'"</button>';document.getElementById('modal').classList.add('show');}
function xModal(){document.getElementById('modal').classList.remove('show');}document.getElementById('modal').onclick=e=>{if(e.target.id==='modal')xModal();};

function tr(t,n){return t&&t.length>n?t.slice(0,n)+'...':t||'';}function fmtN(n){return n>=1e6?(n/1e6).toFixed(1)+'M':n>=1e3?(n/1e3).toFixed(0)+'K':(n||0);}function fmtT(s){return s?Math.floor(s/60)+':'+String(s%60).padStart(2,'0'):'0:00';}function hl(t,q){return t.replace(new RegExp('('+q+')','gi'),'<mark style="background:rgba(59,130,246,.3);color:inherit;padding:0 2px;border-radius:2px">$1</mark>');}
function searchT(t){go('search');document.getElementById('q').value=t;doQ(t);}function newW(){const ins=D.insights||[];if(!ins.length)return;const r=ins[Math.floor(Math.random()*ins.length)];document.getElementById('w-txt').textContent='"'+r.text+'"';document.getElementById('w-src').textContent='‚Äî '+(r.guest||'Guest');const ep=(D.episodes||[]).find(e=>e.id===r.episode_id);document.getElementById('w-link').href=ep?'https://youtube.com/watch?v='+ep.video_id:'#';}

function init(){document.getElementById('s-ep').textContent=(D.episodes||[]).length||'303';document.getElementById('s-seg').textContent=fmtN((D.segments||[]).length)||'5K+';document.getElementById('s-fw').textContent=(D.frameworks||[]).length||'14';document.getElementById('n-ep').textContent=(D.episodes||[]).length;document.getElementById('n-fw').textContent=(D.frameworks||[]).length;document.getElementById('n-ct').textContent=(D.contradictions||[]).length;renderEps();renderFw();renderCt();renderIn();newW();}
init();
</script>
</body>
</html>
